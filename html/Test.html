<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport">
    <link rel="stylesheet" type="text/css" href="../css/layout.css">
    <title>Vue.JS Tutorial</title>
</head>
<body style="background-image: url('../Imagens/Pokemon-Wallpaper.jpg'); background-repeat: no-repeat; background-attachment: fixed; background-position: center; ">

<div id="app">
    <div class="container" style="color: white">
        <div class="row">
            <div class="col-xs-12">
                <input type="text" v-model="parametro" placeholder="Entre com o nome ou o número do pokemon" style="margin-left: auto; margin-right: auto; display: block; width: 300px">
            </div>
        </div>
        <div class="row">
            <div class="col-md-3 offset-md-3" v-show="mostrar">
                <div v-show="procurando"><h1>Procurando pokemon...</h1></div>
                <ul>
                    <li>Id: <span>{{idPokemon}}</span></li>
                    <li>Nome: <span>{{nomePokemon}}</span></li>
                </ul>
            </div>
            <div class="col-md-6">
                <img v-bind:src="imgUrl">
            </div>
        </div>
    </div>
</div>

<script src="https://unpkg.com/vue@2.0.8/dist/vue.js"></script>
<script src="https://unpkg.com/axios@0.12.0/dist/axios.min.js"></script>
<script src="https://unpkg.com/lodash@4.13.1/lodash.min.js"></script>

<script>
    var app = new Vue({
        el: '#app',

        data:{
            parametro: '',
            idPokemon: '',
            nomePokemon: '',
            mostrar: false,
            procurando: false,
            imgUrl: ''
        },

        watch:{
            parametro: function(){
                this.procurarPokemon();
            }
        },

        methods:{
            procurarPokemon: _.debounce(function () {
                var app = this;

                app.mostrar = true;
                app.procurando = true;
                app.idPokemon = '';
                app.nomePokemon = '';

                axios.get('http://pokeapi.co/api/v2/pokemon/' + app.parametro).then(function (response) {
                    app.idPokemon = response.data.id;
                    app.nomePokemon = _.capitalize(response.data.name);
                    app.imgUrl = response.data.sprites["front_default"];
                    app.procurando = false;
                })
                    .catch(function (error) {
                        console.log("NÃO EXISTE ESSE POKEMON");
                    })

            }, 500)

        }
    })
</script>

</body>
</html>